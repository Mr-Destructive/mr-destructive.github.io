<!doctype html>







































<html
  class="not-ready lg:text-base"
  style="--bg: #faf8f1"
  lang="en"
  dir="ltr"
>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Golang Web: URL Parsing - Meet Rajesh Gor</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Introduction
We have done around 32 posts on the fundamental concepts in golang, With that basic foundation, I&rsquo;d like to start with the new section of this series which will be a major one as web-development. This section will have nearly 40-50 posts, this will cover the fundamental concepts for web development like APIs, Database integrations, Authentication and Authorizations, Web applications, static sites, etc.
What is a URL?
A URL is a Uniform Resource Locator. It is a string of characters that identifies a resource on the Internet. URLs are the building blocks of the web, allowing us to access websites, documents, and data with just a click. URLs are all over the place, if we want to build a strong foundation in web development, it&rsquo;s quite important to understand what URLs actually mean and what can they store." />
  <meta name="author" content="Meet Rajesh Gor" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="http://localhost:1313/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="http://localhost:1313/theme.png" />

  
  
  
  
  

  
  
  <link rel="preload" as="image" href="http://localhost:1313/twitter.svg" />
  
  <link rel="preload" as="image" href="http://localhost:1313/github.svg" />
  
  <link rel="preload" as="image" href="http://localhost:1313/linkedin.svg" />
  
  

  
  
  <script
    defer
    src="http://localhost:1313/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link
    rel="icon"
    href="http://localhost:1313/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="http://localhost:1313/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.136.5">

  
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="http://localhost:1313/"
      >Meet Rajesh Gor</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse">
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/"
        >Home</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/blog/"
        >Blog</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/about/"
        >About</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/work/"
        >Work</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
    >
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/meetgor21"
        target="_blank"
        rel="me"
      >
        twitter
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/mr-destructive"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./linkedin.svg)"
        href="https://linkedin.com/in/meetgor"
        target="_blank"
        rel="me"
      >
        linkedin
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100vh-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"
    >
      

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">Golang Web: URL Parsing</h1>

    
    <div class="text-xs antialiased opacity-60">
      
      <time>Sep 5, 2023</time>
      
      
      
      
    </div>
    
  </header>

  <section><h2 id="introduction">Introduction</h2>
<p>We have done around 32 posts on the fundamental concepts in golang, With that basic foundation, I&rsquo;d like to start with the new section of this series which will be a major one as <code>web-development</code>. This section will have nearly 40-50 posts, this will cover the fundamental concepts for web development like APIs, Database integrations, Authentication and Authorizations, Web applications, static sites, etc.</p>
<h2 id="what-is-a-url">What is a URL?</h2>
<p>A URL is a Uniform Resource Locator. It is a string of characters that identifies a resource on the Internet. URLs are the building blocks of the web, allowing us to access websites, documents, and data with just a click. URLs are all over the place, if we want to build a strong foundation in web development, it&rsquo;s quite important to understand what URLs actually mean and what can they store.</p>
<p>A URL looks something like this:</p>
<pre tabindex="0"><code>[scheme:][//[userinfo@]host][/]path[?query][#fragment]
</code></pre><p>Not all the URLs are like this, majority of the URLs that the common user sees are simply the ones with the <code>scheme</code>, <code>host</code>, and <code>paths</code>. However other components are equally important and are vital in the exchanging of information over the network.</p>
<ul>
<li>The <code>scheme</code> is the protocol used for accessing the resource like <code>http</code>, <code>https</code>, <code>ftp</code>, etc.</li>
<li>The <code>userinfo</code> is the username and password used to access the resource.</li>
<li>The <code>host</code> is the domain name of the resource.</li>
<li>The <code>path</code> is the path or folder to the resource.</li>
<li>The <code>query</code> is the query string of the resource. It is usually a key-value pair as a paramter to access resources.</li>
<li>The <code>fragment</code> is used as a reference within the resource.</li>
</ul>
<p>We will see the use cases of most of them throughout this series for example, the <code>userinfo</code> is commonly used in accessing databases over the internet/cloud. The query parameters will be used in making dynamic API calls, etc.</p>
<h2 id="basic-url-parsing">Basic URL Parsing</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/url&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// simple url
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">urlString</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;http://www.google.com&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">parsedUrl</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#a6e22e">urlString</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

http://www.google.com
</code></pre><p>So, what is getting parsed here, we gave the URL as a string we get the URL back, the only difference is that instead of the URL being a string, it is now a structure of components. For instance, we want the protocol the host name, the port, etc. from the URL.</p>
<pre tabindex="0"><code>fmt.Printf(&#34;%T\n&#34;, parsedUrl)
// *url.URL
</code></pre><p>The <code>parsedUrl</code> is a pointer to a <a href="https://pkg.go.dev/net/url#URL">url.URL</a> structure. The structure <code>url.URL</code> has a lot of components to it like <code>Scheme</code>, <code>Host</code>, <code>User</code>, <code>Path</code>, <code>RawQuery</code>, etc. We will dive into each of these soon.</p>
<p>We could get those specific components ourselves, but that would be a bit tedious and might be even prone to bugs.</p>
<p>Let&rsquo;s try to get those components from the URL without any functions, just string manipulation.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">urlString</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;http://www.google.com&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">protocol</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">urlString</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#34;:&#34;</span>)[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">hostName</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">urlString</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#34;//&#34;</span>)[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">protocol</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">hostName</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This might work for a simple URL, but what if we have more complex URLs which have paths, query parameters, fragments, username, port, etc? This could mess up quickly if we tried to get the parts of the URL ourselves. So, golang has a package called <a href="https://pkg.go.dev/net/url">net/url</a> explicitly for parsing URLs.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;strings&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">urlString</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;http://www.google.com&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;http://www.google.com/about/&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;http://www.google.com/about?q=hello&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;http://www.google.com:8080/about?q=hello&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;http://user:password@example.com:8080/path/to/resource?query=value#fragment&#34;</span>,
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">urlString</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">hostStr</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Split</span>(<span style="color:#a6e22e">url</span>, <span style="color:#e6db74">&#34;//&#34;</span>)[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">hostName</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Split</span>(<span style="color:#a6e22e">hostStr</span>, <span style="color:#e6db74">&#34;/&#34;</span>)[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">hostName</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

www.google.com
www.google.com
www.google.com
www.google.com:8080
user:password@example.com:8080
</code></pre><p>The above code might work for most of the URLs, but what if we have a more complex URL like the one with <code>port</code> or <code>user</code>, it doesn&rsquo;t give the thing we want exactly. In the above example, we have created a list of URLs as strings and simply iterated over each of the <code>url</code> in the <code>urlString</code>. Thereafter, we split the <code>url</code> on <code>//</code> so we get <code>https:</code> and <code>www.google.com</code>, if we want the host/domain name, we could simply get the <code>1</code> index in the slice since the <a href="https://pkg.go.dev/strings#Split">strings.Split</a> method returns a slice after splitting the string with the provided separator. The <code>hostName</code> could be fetched from the <code>1</code> index. However, this time for the 2nd element in the list, we have <code>https://www.google.com/about</code>, which would return <code>www.google.com/about</code> as the hostname which is not ideal, so we will again have to split this string with <code>/</code> and grab the first part i.e. 0th index.</p>
<p>The above code would work for <code>paths</code> and <code>query</code> parameters but if we had ports, and username, and password, it would not work as expected as evident from the last 2 examples in the list.</p>
<p>So, now we know the downsides of manually parsing the URLs, we can use the <a href="https://pkg.go.dev/net/url">net/url</a> package to do it for us.</p>
<h2 id="parsing-db-urls">Parsing DB URLs</h2>
<p>Databases have a connection URL or connection string which provides a standard way to connect to a database/database server. The format of the URL is just the <code>URL</code> with all the components from the <code>scheme</code> to the <code>path</code>. The common examples of some database connection URLs might include:</p>
<pre tabindex="0"><code># PostgreSQL DB Connection URL/string
postgresql://username:password@hostname:port/database_name

# MongoDB Connection URL/string
mongodb://username:password@hostname:port/database_name
</code></pre><p>The above are examples of the Postgres and MongoDB connection URLs, they have a <code>protocol</code> which usually for databases is their short name, the user credentials i.e. <code>username</code> and <code>password</code>, the <code>hostname</code> i.e. the server IP address, the <code>port</code> on which the database is running, and finally the path as the <code>database name</code>.</p>
<p>We can construct a simple snippet in golang to grab all the details from the simple connection URL string with the <code>net/url</code> package.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/url&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//postgres db url
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">dbUrl</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#e6db74">&#34;postgres://admin:pass1234@localhost:5432/mydb&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">dbUrl</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Scheme/Protocol = &#34;</span>, <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">Scheme</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;User = &#34;</span>, <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">User</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//fmt.Println(&#34;User = &#34;, dbUrl.User.String())
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Username = &#34;</span>, <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">User</span>.<span style="color:#a6e22e">Username</span>())
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">password</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">User</span>.<span style="color:#a6e22e">Password</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Password = &#34;</span>, <span style="color:#a6e22e">password</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Host = &#34;</span>, <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">Host</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;HostName = &#34;</span>, <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">Hostname</span>())
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Port = &#34;</span>, <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">Port</span>())
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;DB Name = &#34;</span>, <span style="color:#a6e22e">dbUrl</span>.<span style="color:#a6e22e">Path</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

postgres://postgres:pass1234@localhost:5432/mydb
Scheme/Protocol =  postgres
User = admin:pass1234
Username =  admin
Password =  pass1234
Host =  localhost:5432
HostName =  localhost
Port =  5432
DB Name =  mydb
</code></pre><p>In the above code, we have given the string <code>postgres://admin:pass1234@localhost:5432/mydb</code>, and we have parsed the URL using the <code>net/url</code> package. The result is we have a <code>parsedUrl</code> object which has all the components that can be accessed as either fields or methods. Let&rsquo;s break down each field/method we used in the above example:</p>
<ul>
<li>The <code>Scheme</code> is simply a string representing the protocol of the resource(URL).</li>
<li>The <code>User</code> is the <a href="https://pkg.go.dev/net/url#Userinfo">UserInfo</a> object having immutable username and password fields.</li>
<li>The <code>Username</code> is the method on <a href="https://pkg.go.dev/net/url#Userinfo.Username">UserInfo</a> that returns the string representing the username of the URL.</li>
<li>The <code>Password</code> is the method on <a href="https://pkg.go.dev/net/url#Userinfo.Password">UserInfo</a> that returns the string representing the password of the URL.</li>
<li>The <code>Host</code> is the field on <code>URL</code> as a string representing the host:port of the URL.</li>
<li>The <code>Hostname</code> is the method on <a href="https://pkg.go.dev/net/url#URL.Hostname">URL</a> that returns the string representing the hostname of the URL.</li>
<li>The <code>Port</code> is the method on <a href="https://pkg.go.dev/net/url#URL.Port">URL</a> that returns the string representing the port of the URL.</li>
<li>The <code>Path</code> is the field as the string representing the path of the URL.</li>
</ul>
<p>So, this is how we can get almost every detail like <code>db protocol</code>, <code>username</code>, <code>password</code>, <code>hostname</code>, <code>port</code>, and the <code>database name</code> from the database connection string URL.</p>
<h2 id="parsing-query-parameters">Parsing Query Parameters</h2>
<p>We can even get the query parameters of a URL using the <a href="https://pkg.go.dev/net/url#URL.Query">Query</a> method on the <code>URL</code> object. The <code>Query</code> method returns a <code>map[string][]string</code> which is to say a map with the key as <code>string</code> and the value as a <code>[]string</code> slice of string. For example, if the URL is something like <code>https://google.com/?q=hello</code>, the <code>Query</code> method will return <code>map[q:[hello]]</code> which means the key is <code>q</code> and the value is a list of strings of which the only element is <code>hello</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/url&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// a complex url with query params
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">urlStr</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;http://www.google.com/?q=hello&amp;q=world&amp;lang=en&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">parsedUrl</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#a6e22e">urlStr</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">Query</span>())
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">Query</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;KEY:&#34;</span>, <span style="color:#a6e22e">k</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">vv</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">v</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">vv</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

http://www.google.com/?q=hello+world&amp;lang=en&amp;q=gopher
map[lang:[en] q:[hello world gopher]]
KEY: q
hello world
gopher
KEY: lang
en
</code></pre><p>We have taken a bit of a complex example that might cover many use cases of the <code>Query</code> method. We have a URL as <code>http://www.google.com/?q=hello&amp;q=world&amp;lang=en</code>, and the <code>Query</code> method returns <code>map[lang:[en] q:[hello world]]</code> which means the <code>q</code> key has a slice of a string with elements <code>hello world</code> and <code>gopher</code> and the <code>lang</code> key has a value of <code>en</code>. Here, the first paramter, <code>q=hello+world</code> is basically <code>hello world</code> or <code>hello%20world</code>, which is to say escaping the space in the URL. We can have multiple values for the same key, which is evident as we have added <code>q=gopher</code> at the end of the <code>URL</code>, the key <code>q</code> has two elements in the slice as <code>hello world</code> and <code>gopher</code>. The <code>lang=en</code> is simply a key as <code>lang</code> with the only element as <code>en</code> in the slice. We use <code>&amp;</code> to separate different query parameters in the URL.</p>
<h3 id="checking-values-in-query-parameters">Checking Values in Query Parameters</h3>
<p>We can even check the values in the query parameters without requiring the construction of for loops to find a particular value in a key. The <a href="https://pkg.go.dev/net/url#Values">Values</a> is a type that stores the map as a return value from the <code>Query</code> method. It has a few handy methods like:</p>
<ul>
<li><a href="https://pkg.go.dev/net/url#Values.Has">Has</a> to check if the key exists in the map (paramter as key <code>string</code> and returns a <code>bool</code>).</li>
<li><a href="https://pkg.go.dev/net/url#Values.Get">Get</a> to fetch the first value of the given key as a string or if not present then returns an empty string (paramter as key <code>string</code> and returns <code>string</code>).</li>
<li><a href="https://pkg.go.dev/net/url#Values.Add">Add</a> method is used to append the value for a given key (paramter as key <code>string</code> and value to be added as <code>string</code>).</li>
<li><a href="https://pkg.go.dev/net/url#Values.Set">Set</a> method is used to replace the value for a given key if already exists (paramter as key <code>string</code> and value as <code>string</code>).</li>
<li><a href="https://pkg.go.dev/net/url#Values.Del">Del</a> method is used to delete the value for a given key (paramter as key <code>string</code>).</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/url&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// a complex url with query params
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">urlStr</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;http://www.google.com/?q=hello+world&amp;lang=en&amp;q=gopher&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">parsedUrl</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#a6e22e">urlStr</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">Query</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">queryParams</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">Query</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;q&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Has</span>(<span style="color:#e6db74">&#34;q&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Has</span>(<span style="color:#e6db74">&#34;lang&#34;</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;lang&#34;</span>))
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#e6db74">&#34;q&#34;</span>, <span style="color:#e6db74">&#34;ferris&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">queryParams</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;q&#34;</span>, <span style="color:#e6db74">&#34;books&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">queryParams</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Del</span>(<span style="color:#e6db74">&#34;q&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">queryParams</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

http://www.google.com/?q=hello+world&amp;lang=en&amp;q=gopher
hello world
true
en
map[lang:[en] q:[hello world gopher ferris]]
map[lang:[en] q:[books]]
map[lang:[en]]
</code></pre><p>The above code example demonstrates almost all the methods available on the <code>Values</code> type. The <code>Get</code> method is used to fetch the first value for a given key, so we parse the key as a <code>string</code> to the method and it would return a <code>string</code>. We checked for the <code>q</code> as the key and it returned the first element in the <code>queryParams</code> for key <code>q</code> as <code>hello world</code> from the list <code>[hello world, gopher]</code>. The <code>Has</code> method takes in the paramter as key as <code>string</code> and returns if the key exists in the <code>queryParams</code> or not as a bool. The <code>Add</code> method, we have used to <code>Add</code> a key with a particular value, we added the value <code>ferris</code> to the key <code>q</code> hence it appended to the list and the list of <code>queryParams[q]</code> became <code>[hello world, gopher, ferris]</code>. The <code>Set</code> method is used to override the existing key with a particular value, here we have set the value <code>books</code> to the key <code>q</code> and hence the list of <code>queryParams[q]</code> becomes <code>[books]</code>. We can use the <code>Del</code> method to remove the key from the <code>queryParams</code>, so we delete <code>q</code> from <code>queryParams</code>, then the <code>queryParams</code> simply has no key as <code>q</code> in it.</p>
<h3 id="parsing-query-parameters-to-string">Parsing Query Parameters to String</h3>
<p>Now, that you have manipulated the query parameters, let&rsquo;s say you want to construct back that string representation of the query particular or the URL for it. The <a href="">Encode</a> method is used to grab the <code>queryParams</code> i.e. <code>Values</code> object and convert it into the <code>string</code> representation of the encoded URL.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/url&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// a complex url with query params
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">urlStr</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;http://www.google.com/?q=hello+world&amp;lang=en&amp;q=gopher&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">parsedUrl</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#a6e22e">urlStr</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryParams</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">Query</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#e6db74">&#34;name&#34;</span>, <span style="color:#e6db74">&#34;ferris&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">q</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Encode</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">q</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

lang=en&amp;name=ferris&amp;q=hello+world&amp;q=gopher
</code></pre><p>So, we can see the <code>Encode</code> method has given a query parameter in the form of a URL encoded string. We first grab the query parameters from the <code>parsedUrl</code> which is a <code>URL</code> object via the <code>Query</code> method, we then <code>Add</code> the key <code>name</code> with a value of <code>ferris</code> to the <code>queryParams</code>. This is then used to <code>Encode</code> the object back to a string representation. This could be useful to construct a query paramter for requesting other websites/APIs.</p>
<h2 id="parsing-url-object-back-to-string">Parsing URL object back to String</h2>
<p>We can even get the <code>URL</code> object back to a string representation using the <a href="https://pkg.go.dev/net/url#URL.String">String</a> method on the <code>URL</code> object. The <code>String</code> method returns a <code>string</code> representation of the URL object.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/url&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">urlStr</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;http://www.google.com/?q=hello+world&amp;lang=en&amp;q=gopher&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;URL:&#34;</span>, <span style="color:#a6e22e">urlStr</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">parsedUrl</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#a6e22e">urlStr</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">queryParams</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">Query</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#e6db74">&#34;name&#34;</span>, <span style="color:#e6db74">&#34;ferris&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">q</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">queryParams</span>.<span style="color:#a6e22e">Encode</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">q</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">RawQuery</span> = <span style="color:#a6e22e">q</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">newUrl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">String</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;New URL:&#34;</span>, <span style="color:#a6e22e">newUrl</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

URL: http://www.google.com/?q=hello+world&amp;lang=en&amp;q=gopher
lang=en&amp;name=ferris&amp;q=hello+world&amp;q=gopher
New URL: http://www.google.com/?lang=en&amp;name=ferris&amp;q=hello+world&amp;q=gopher
</code></pre><p>In the example above, we parse a URL string into a <code>URL</code> object as <code>parsedUrl</code>, then we <code>Add</code> the key <code>name</code> with a value of <code>ferris</code> to the <code>queryParams</code>. We then <code>Encode</code> the <code>URL</code> object back to a string representation. But this won&rsquo;t change the <code>parsedUrl</code> object we want to change the entire <code>URL</code> object. For that, we have overwritten the <code>RawQuery</code> field of the <code>URL</code> object with the query parameter encoded string as <code>q</code>. The <code>String</code> method returns a <code>string</code> representation of the <code>URL</code> object.</p>
<h2 id="parsing-fragments">Parsing Fragments</h2>
<p>The fragment in a URL is usually present in a static website like <code>#about</code>, <code>#contact</code>, <code>#blog</code>, etc. The <code>Fragment</code> is a string that is usually a reference to a specific section or anchor point within a web page or resource. When a URL with a fragment is accessed, the web browser or user agent will scroll the page to display the section identified by the fragment.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/url&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// url with fragments
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">urlStr</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;https://pkg.go.dev/math/rand#Norm Float64&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">parsedUrl</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Parse</span>(<span style="color:#a6e22e">urlStr</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">Fragment</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">RawFragment</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">parsedUrl</span>.<span style="color:#a6e22e">EscapedFragment</span>())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><pre tabindex="0"><code>$ go run main.go

https://pkg.go.dev/math/rand#Norm Float64

Norm Float64
Norm Float64
Norm%20Float64
</code></pre><p>The above code is used to fetch the <code>#Norm Float64</code> fragment from the URL <code>https://pkg.go.dev/math/rand#NormFloat64</code>. We can use the <a href="https://pkg.go.dev/net/url#URL">Fragment</a> field in the <code>URL</code> object to get the fragment text. There is <a href="https://pkg.go.dev/net/url#URL">RawFragment</a> field that is used to parse the fragment text as it is, without trying to escape any special characters in the URL. The <a href="https://pkg.go.dev/net/url#URL.EscapedFragment">EscapedFragment</a> is used to parse the fragment text by escaping the characters in the URL.</p>
<p>That&rsquo;s it from the 32nd part of the series, all the source code for the examples are linked in the GitHub on the <a href="https://github.com/Mr-Destructive/100-days-of-golang/tree/main/web/url-parsing">100 days of Golang</a> repository.</p>
<p><a href="https://github.com/Mr-Destructive/100-days-of-golang">100-days-of-golang</a></p>
<h2 id="conclusion">Conclusion</h2>
<p>From the first post of the web development section, we covered the fundamentals of URL parsing and got a bit introduced to the <code>net</code> package, which will be heavily used for most of the core language&rsquo;s features for working with the web. We covered the concepts for parsing URLs, getting components of URLs from the parsed object, Database connection URL resolving, parsing query parameters, and some other URL-related concepts.</p>
<p>Hopefully, you found this section helpful, if you have any comments or feedback, please let me know in the comments section or on my social handles. Thank you for reading. Happy Coding :)</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/go"
      >go</a
    >
    
  </footer>
  

  
  
  
  
  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  >
    
    <a class="ltr:pr-3 rtl:pl-3" href="http://localhost:1313/golang-web-get-method/"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>Golang Web: GET Method</span></a
    >
    
    
    <a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href="http://localhost:1313/golang-channels/"
      ><span>Golang: Channels</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    >
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    </main>

    <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    &copy; 2024
    <a class="link" href="http://localhost:1313/">Meet Rajesh Gor</a>
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

  </body>
</html>
