<!doctype html>







































<html
  class="not-ready lg:text-base"
  style="--bg: #faf8f1"
  lang="en"
  dir="ltr"
>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Golang: Generics - Meet Rajesh Gor</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Introduction
In the 29th post of the series, we will be looking into generics in Golang. Generics were added in Golang version 1.18, so they are quite new in the world of Golang but the concept is quite old in other programming languages.
Generics provide a powerful toolset for writing more expressive and concise code that can handle a wide range of data types. With generics, we can write reusable algorithms, data structures, and functions that work seamlessly with various types, without sacrificing type safety." />
  <meta name="author" content="Meet Rajesh Gor" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="http://localhost:1313/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="http://localhost:1313/theme.png" />

  
  
  
  
  

  
  
  <link rel="preload" as="image" href="http://localhost:1313/twitter.svg" />
  
  <link rel="preload" as="image" href="http://localhost:1313/github.svg" />
  
  <link rel="preload" as="image" href="http://localhost:1313/linkedin.svg" />
  
  

  
  
  <script
    defer
    src="http://localhost:1313/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link
    rel="icon"
    href="http://localhost:1313/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="http://localhost:1313/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.136.5">

  
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="http://localhost:1313/"
      >Meet Rajesh Gor</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse">
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/"
        >Home</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/about/"
        >About</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/work/"
        >Work</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
    >
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/meetgor21"
        target="_blank"
        rel="me"
      >
        twitter
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/mr-destructive"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./linkedin.svg)"
        href="https://linkedin.com/in/meetgor"
        target="_blank"
        rel="me"
      >
        linkedin
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100vh-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"
    >
      

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">Golang: Generics</h1>

    
    <div class="text-xs antialiased opacity-60">
      
      <time>Jul 23, 2023</time>
      
      
      
      
    </div>
    
  </header>

  <section><h2 id="introduction">Introduction</h2>
<p>In the 29th post of the series, we will be looking into generics in Golang. Generics were added in Golang version 1.18, so they are quite new in the world of Golang but the concept is quite old in other programming languages.</p>
<p>Generics provide a powerful toolset for writing more expressive and concise code that can handle a wide range of data types. With generics, we can write reusable algorithms, data structures, and functions that work seamlessly with various types, without sacrificing type safety.</p>
<p>We will learn how to create generic functions and work with generic types. Additionally, we will cover type constraints and interfaces, which allow us to specify requirements for the types used with our generics.</p>
<h2 id="generic-type-in-functions">Generic Type in Functions</h2>
<p>We can define a generic type with the keyword <code>any</code> that is going to replace the type <code>T</code> i.e. any data type with the inferred type at compilation. This makes the code reusable to any relevant data type to be used for that operation/task.</p>
<p>We can provide the type <code>any</code> after the name of the function/struct to make it generic like <code>func Name[T any](x T)</code>. Here, the Name is a function that takes in a generic type <code>T</code> it could be any type and the variable is named as <code>x</code> that could be used inside the function.</p>
<p>We could also make the function take specific types instead of <code>any</code> but we will eventually move into that. However, for now, let&rsquo;s ease the process of learning and then move on to the optimizations and adding constraints.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Print</span>[<span style="color:#a6e22e">T</span> <span style="color:#a6e22e">any</span>](<span style="color:#a6e22e">stuff</span> <span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">stuff</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Print</span>(<span style="color:#e6db74">&#34;hello&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Print</span>(<span style="color:#ae81ff">123</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">Print</span>(<span style="color:#ae81ff">3.148</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><a href="https://go.dev/play/p/t-ODmkHu5BJ">GO Playground Link</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span>hello
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">123</span>
</span></span><span style="display:flex;"><span>3.148
</span></span></code></pre></div><p>The above is the simplest example that could be used to demonstrate a generic function. The function <code>Print</code> takes a parameter <code>stuff</code> of a generic type denoted by a type parameter <code>T</code>. The type parameter <code>T</code> serves as a placeholder that represents a specific type determined at compile time when the function is invoked.</p>
<p>This means, if in my code I do not call the function with the type <code>[]int</code> it won&rsquo;t have the function with the signature as <code>Print(stuff []int)</code> rather only the types which the function is called with are inferred and written with that specific types.</p>
<h2 id="creating-a-generic-slice">Creating a Generic Slice</h2>
<p>We can even create a slice with a generic type and allow any valid processing on the elements or the slice as a whole.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ForEach</span>[<span style="color:#a6e22e">T</span> <span style="color:#a6e22e">any</span>](<span style="color:#a6e22e">arr</span> []<span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">T</span>)) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">arr</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">f</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">strSlice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#e6db74">&#34;a&#34;</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ForEach</span>(<span style="color:#a6e22e">strSlice</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">string</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">slice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">25</span>, <span style="color:#ae81ff">33</span>, <span style="color:#ae81ff">42</span>, <span style="color:#ae81ff">50</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">evenSlice</span> []<span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ForEach</span>(<span style="color:#a6e22e">slice</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">isEven</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span><span style="color:#f92672">%</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isEven</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">evenSlice</span> = append(<span style="color:#a6e22e">evenSlice</span>, <span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">evenSlice</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>b
</span></span><span style="display:flex;"><span>e
</span></span><span style="display:flex;"><span>a
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#ae81ff">10</span> <span style="color:#ae81ff">42</span> 50<span style="color:#f92672">]</span>
</span></span></code></pre></div><p><a href="https://go.dev/play/p/tUwgbxnLc-1">Go Playground Link</a></p>
<p>The <code>ForEach</code> is a generic function that iterates over a slice of any type and calls a function on each element. Let&rsquo;s break it down:</p>
<ul>
<li>
<p><code>ForEach[T any]</code> declares this as a generic function that works on a slice of any type <code>T</code>.</p>
</li>
<li>
<p><code>arr []T</code> is the slice of elements we want to iterate over. It can be a slice of any type, ints, strings, <code>T</code> in general, etc. So it is a generic slice parameter.</p>
</li>
<li>
<p><code>f func(T)</code> is the function that will be called on each element. It takes a single parameter of type <code>T</code> which will be each element. So, this is a function parameter with a generic type as its parameter.</p>
</li>
</ul>
<p>In the body, we range over the slice arr:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">arr</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>On each iteration, <code>v</code> will be the next element. The underscore ignores the index. We call the provided function <code>f</code>, passing the element <code>v</code>: <code>f(v)</code></p>
<p>So in summary:</p>
<ul>
<li>
<p>It allows iterating over a slice of any type</p>
</li>
<li>
<p>This avoids having to know the specific slice type in the loop</p>
</li>
<li>
<p>The provided function <code>f</code> is called on each element</p>
</li>
<li>
<p>So it provides a reusable abstraction for processing slices generically.</p>
</li>
</ul>
<p>Now, we will discuss the example used in the main function. First, we create a slice of strings as <code>strSlice := []string{&quot;b&quot;, &quot;e&quot;, &quot;a&quot;}</code>. Then we call the generic <code>ForEach</code> function, passing the string slice and a function to handle each element.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ForEach<span style="color:#f92672">(</span>strSlice, func<span style="color:#f92672">(</span>v string<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  fmt.Println<span style="color:#f92672">(</span>v<span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">})</span>
</span></span></code></pre></div><p>Here, the <code>func(v string)</code> is the invocation of the <code>ForEach</code> function with the typed string and the variable name as v. The <code>v</code> is the element of the slice, so inside the function body(this is an anonymous function), we call the <code>fmt.Println(v)</code>, which will print each string in the slice.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">slice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">25</span>, <span style="color:#ae81ff">33</span>, <span style="color:#ae81ff">42</span>, <span style="color:#ae81ff">50</span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">evenSlice</span> []<span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ForEach</span>(<span style="color:#a6e22e">slice</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">int</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isEven</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span><span style="color:#f92672">%</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">isEven</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">evenSlice</span> = append(<span style="color:#a6e22e">evenSlice</span>, <span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">evenSlice</span>)
</span></span></code></pre></div><p>In the next example, we create a new slice of int as <code>slice := []int{10, 25, 33, 42, 50}</code>. Then we call the generic <code>ForEach</code> function again, passing the slice and a function to handle each element just as before, however, we are processing some things and then appending to an external slice.</p>
<p>First, the <code>slice := []int{10, 25, 33, 42, 50}</code> is created with some numbers, we also initialize another slice as <code>evenSlice := []int{}</code> which is empty. Then we call the generic <code>ForEach</code> function again, passing the slice and a function to handle each <a href="http://element.Here">element.Here</a>, the ForEach is called with the <code>slice</code> slice and not the <code>evenSlice</code> slice, so we are going to access each element in the <code>slice</code> array. We first create a <code>isEven</code> boolean that checks if the element is even or odd by <code>v%2 == 0</code>. This expression will result in <code>true</code> if <code>v</code> is even and <code>false</code> otherwise. So, only if the <code>isEven</code> is true, we append the element <code>v</code> into the <code>evenSlice</code> slice.</p>
<p>So, that&rsquo;s how generic slices can be handy for doing type-specific processing without writing functions for those individual types. This avoids needing to write type-specific functions for each slice type.</p>
<p>NOTE: Make sure to only use generic functions with generic slice types with the appropriate and valid conditions and use it only when it looks legible to do so.</p>
<h2 id="creating-a-generic-map">Creating a Generic Map</h2>
<p>We can also create a generic map with the generic type of <code>map[K]T</code> where <code>K</code> is a generic type and <code>T</code> is the type of the key.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GetValue</span>[<span style="color:#a6e22e">K</span> <span style="color:#a6e22e">comparable</span>, <span style="color:#a6e22e">V</span> <span style="color:#a6e22e">any</span>](<span style="color:#a6e22e">m</span> <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">K</span>]<span style="color:#a6e22e">V</span>, <span style="color:#a6e22e">key</span> <span style="color:#a6e22e">K</span>, <span style="color:#a6e22e">defaultVal</span> <span style="color:#a6e22e">V</span>) <span style="color:#a6e22e">V</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">key</span>]; <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">defaultVal</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">serverStats</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;port&#34;</span>:      <span style="color:#ae81ff">8000</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;pings&#34;</span>:     <span style="color:#ae81ff">47</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;status&#34;</span>:    <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;endpoints&#34;</span>: <span style="color:#ae81ff">13</span>,
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">GetValue</span>(<span style="color:#a6e22e">serverStats</span>, <span style="color:#e6db74">&#34;status&#34;</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">v</span> = <span style="color:#a6e22e">GetValue</span>(<span style="color:#a6e22e">serverStats</span>, <span style="color:#e6db74">&#34;cpu&#34;</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>
</span></span></code></pre></div><p><a href="https://go.dev/play/p/ludlh6UwKaD">Go Playground Link</a></p>
<p>GetValue is a generic function that takes three type parameters: The map itself, the key to find the value for, and a default value if the key doesn&rsquo;t exist.</p>
<p>The <code>m</code> is a map with keys of type K and values of type V, the key is of type K, and defaultVal is of type V. So, we have two generics here, as the key and value need not be of the same type, hence we have distinct generics here. K has added a constraint of <code>comparable</code> and <code>V</code> as <code>any</code> type. The type constraint comparable restricts K to be a comparable type, and the type constraint <code>any</code> allows V to be any type.</p>
<ul>
<li>
<p>Inside the function, we use the ok variable to check if the given <code>key</code> exists in the map <code>m</code>.</p>
</li>
<li>
<p>If the key is present in the map (ok is true), we retrieve the corresponding value from the map and return it as <code>m[key]</code> which is stored in the variable <code>v</code>.</p>
</li>
<li>
<p>If the key is not present in the map (ok is false), we return the provided <code>defaultVal</code>.</p>
</li>
</ul>
<p>So, this is how we can use any type of map to retrieve the value of a key, the data type of key and value could be anything. It allows us to retrieve a value from a map irrespective of the pair type in the map.</p>
<p>NOTE: The type of <code>defaultVal</code> and the type of <code>v</code> should be the same since the map will need to have the value for the given key as the same type as defined in the map type(here <code>map[string]int</code> so <code>v</code> is <code>int</code> and so should be the <code>defaultVal</code>).</p>
<p>Moving into the main function, we create a map of <code>[string]int</code> i.e. the key is of type <code>string</code> and the value of type <code>int</code>. The map <code>serverStats</code> has a few keys like <code>port</code>, <code>pings</code>, <code>endpoints</code>, and <code>status</code>. We call the <code>GetValue</code> method on the map <code>serverStats</code> with the key <code>status</code> and provide a default value of <code>-1</code>. The function will readily return <code>1</code> since the key is present in the provided map. However, if we try to access the key <code>cpu</code>, the key is not present and the value is returned as the <code>defaultVal</code> which we passed as <code>4</code>.</p>
<p>So, this was a simple generic getter method on a map. We can get a value of a key in a map of any pair and even provide a default value if doesn&rsquo;t exist. However, it won&rsquo;t add it to the map, we will just return the value from the function that&rsquo;s it. We have to see that returned default value manually.</p>
<p>We can make another function to get or set the value of a key in a map. The function will take in a reference to the map rather than a copy of the map, we can then use that reference to set the key with the provided default value.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GetOrSetValue</span>[<span style="color:#a6e22e">K</span> <span style="color:#a6e22e">comparable</span>, <span style="color:#a6e22e">V</span> <span style="color:#a6e22e">any</span>](<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">K</span>]<span style="color:#a6e22e">V</span>, <span style="color:#a6e22e">key</span> <span style="color:#a6e22e">K</span>, <span style="color:#a6e22e">defaultVal</span> <span style="color:#a6e22e">V</span>) <span style="color:#a6e22e">V</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// reference the original map
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">ref</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">m</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ref</span>[<span style="color:#a6e22e">key</span>]; <span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>
</span></span><span style="display:flex;"><span>	} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//mutate the original map
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">ref</span>[<span style="color:#a6e22e">key</span>] = <span style="color:#a6e22e">defaultVal</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">defaultVal</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">serverStats</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;port&#34;</span>:      <span style="color:#ae81ff">8000</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;pings&#34;</span>:     <span style="color:#ae81ff">47</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;status&#34;</span>:    <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;endpoints&#34;</span>: <span style="color:#ae81ff">13</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">serverStats</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">GetOrSetValue</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">serverStats</span>, <span style="color:#e6db74">&#34;cpu&#34;</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">serverStats</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>map<span style="color:#f92672">[</span>endpoints:13 pings:47 port:8000 status:1<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>map<span style="color:#f92672">[</span>cpu:4 endpoints:13 pings:47 port:8000 status:1<span style="color:#f92672">]</span>
</span></span></code></pre></div><p><a href="https://go.dev/play/p/fYtjFQRaPCb">Go Playground Link</a></p>
<p>In the above code, we take a reference of the map as <code>*map[K]V</code>, this will give access to the actual place(memory address where the map is located so we could mutate/change it). The rest of the parameters are kept as is, the key will be taken as it was before, and so will the <code>defaultVal</code>. The only difference is that we will set the <code>key</code> doesn&rsquo;t exist, we set the <code>ref[key]</code> to the <code>defaultVal</code> and return the <code>defaultVal</code>.</p>
<p>For example, the <code>cpu</code> key is not present in the initial map <code>serverStats</code> so, when we call the <code>GetOrSetValue</code> with the reference to the map <code>serverStats</code>, key as <code>cpu</code> and the default value as <code>4</code>, the function returns <code>4</code> and the map is mutated with the key <code>cpu</code> with value <code>4</code>.</p>
<p>The takeaway is you can even use references to access the original data and mutate it based on your needs.</p>
<h2 id="generic-type-in-struct">Generic Type in Struct</h2>
<p>We can define custom structs with generic type as the field values. The name of the struct is followed by the <code>[T any]</code> which is the type parameter to be used in the struct fields, again this type could have multiple types(since a struct can have many fields), not necessary want a single type parameter, you could have multiple type parameters bunched up just like we saw in the map example.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Stack</span>[<span style="color:#a6e22e">T</span> <span style="color:#a6e22e">any</span>] <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">items</span> []<span style="color:#a6e22e">T</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewStack</span>[<span style="color:#a6e22e">T</span> <span style="color:#a6e22e">any</span>]() <span style="color:#f92672">*</span><span style="color:#a6e22e">Stack</span>[<span style="color:#a6e22e">T</span>] {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Stack</span>[<span style="color:#a6e22e">T</span>]{}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Stack</span>[<span style="color:#a6e22e">T</span>]) <span style="color:#a6e22e">Push</span>(<span style="color:#a6e22e">item</span> <span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">items</span> = append(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">items</span>, <span style="color:#a6e22e">item</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Stack</span>[<span style="color:#a6e22e">T</span>]) <span style="color:#a6e22e">Pop</span>() <span style="color:#a6e22e">T</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">items</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>		panic(<span style="color:#e6db74">&#34;Stack is empty&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">index</span> <span style="color:#f92672">:=</span> len(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">items</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">item</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">index</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">items</span> = <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">items</span>[:<span style="color:#a6e22e">index</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">item</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intStack</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewStack</span>[<span style="color:#66d9ef">int</span>]()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intStack</span>.<span style="color:#a6e22e">Push</span>(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intStack</span>.<span style="color:#a6e22e">Push</span>(<span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intStack</span>.<span style="color:#a6e22e">Push</span>(<span style="color:#ae81ff">30</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Integer Stack&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">intStack</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intStack</span>.<span style="color:#a6e22e">Pop</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intStack</span>.<span style="color:#a6e22e">Pop</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">intStack</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// without the NewStack method
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#a6e22e">strStack</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Stack</span>[<span style="color:#66d9ef">string</span>]{}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">strStack</span>.<span style="color:#a6e22e">Push</span>(<span style="color:#e6db74">&#34;c&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">strStack</span>.<span style="color:#a6e22e">Push</span>(<span style="color:#e6db74">&#34;python&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">strStack</span>.<span style="color:#a6e22e">Push</span>(<span style="color:#e6db74">&#34;mojo&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;String Stack:&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strStack</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">strStack</span>.<span style="color:#a6e22e">Pop</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strStack</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Integer Stack
</span></span><span style="display:flex;"><span>&amp;<span style="color:#f92672">{[</span><span style="color:#ae81ff">10</span> <span style="color:#ae81ff">20</span> 30<span style="color:#f92672">]}</span>
</span></span><span style="display:flex;"><span>&amp;<span style="color:#f92672">{[</span>10<span style="color:#f92672">]}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>String Stack:
</span></span><span style="display:flex;"><span><span style="color:#f92672">{[</span>c python mojo<span style="color:#f92672">]}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{[</span>c python<span style="color:#f92672">]}</span>
</span></span></code></pre></div><p><a href="https://go.dev/play/p/4t_P2mKtTZN">Go Playground Link</a></p>
<p>In this example, we have used the <code>Stack</code> example for doing a basic <code>Push</code> and <code>Pop</code> operation on the elements. Here the type of the underlying stack elements could be anything, hence the type parameter is defined for the <code>items</code> which is a list/slice of the type <code>T</code> as <code>[]T</code>. We have to specify the type before initializing the</p>
<p>We have created the <code>NewStack</code> method, it is not needed, it could be just used as <code>Stack[int]{}</code> to initialize a empty stack with int type(here <code>int</code> could be any other type you wish). I have just created it so that it shows the abstraction that could be built upon in real applications. The <code>NewStack</code> simply replaces the <code>T</code> with the provided <code>type</code> in the initialization.</p>
<p>The <code>Push</code> method is associated with the <code>Stack</code> struct, as we refer to the <code>*Stack[T]</code> indicating a reference to the Stack object with the type <code>T</code>. The method takes in the parameter <code>T</code> which would be the element to be added to the <code>Stack</code>. Since the function is tied to the Stack struct, we can simply mutate the underlying <code>items</code> by appending the provided value <code>item</code> in the parameter using <code>s.items = append(s.items, item)</code>. This appends the <code>item</code> to the underlying <code>items</code> list in the <code>Stack</code> object <code>s</code></p>
<p>Similarly, we can create <code>Pop</code> method as well, which will first check if the <code>Stack</code> is not empty(i.e. the s.items slice has a length greater than 0), then get the index of the last element using <code>len(s.items) - 1</code> and then slice the <code>items</code> at index <code>[:last_index]</code>. This will basically get you all the elements except the last. Before we remove the element from the slice, we also store the item in <code>item</code> variable and return it from the method.</p>
<p>You could see the case of generics here, you could build complex data structures without creating a separate implementation for each type.</p>
<h2 id="adding-constraints-to-generics">Adding Constraints to Generics</h2>
<p>We can add constraints to the generics to restrict the type of the generic parameter. For example, we can add a constraint for the generic type to be a slice of a specific type or we have seen in the map example the <code>comparable</code> constraint.</p>
<p>The <code>comparable</code> constraint is an interface that allows two instances of the same type to be compared i.e. support comparison operators like ==, &lt;, &gt;, !=, &gt;=, &lt;=, etc. It could be any numeric type like <code>int</code>, <code>float</code>, <code>uint</code> and variants, booleans, time duration, and any other struct that implements the <code>comparable</code> interface.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">FindIndex</span>[<span style="color:#a6e22e">T</span> <span style="color:#a6e22e">comparable</span>](<span style="color:#a6e22e">arr</span> []<span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">value</span> <span style="color:#a6e22e">T</span>) <span style="color:#66d9ef">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">arr</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">value</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">i</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">strSlice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;m&#34;</span>, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#e6db74">&#34;t&#34;</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">FindIndex</span>(<span style="color:#a6e22e">strSlice</span>, <span style="color:#e6db74">&#34;e&#34;</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">FindIndex</span>(<span style="color:#a6e22e">strSlice</span>, <span style="color:#e6db74">&#34;t&#34;</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">FindIndex</span>(<span style="color:#a6e22e">strSlice</span>, <span style="color:#e6db74">&#34;a&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intSlice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">25</span>, <span style="color:#ae81ff">33</span>, <span style="color:#ae81ff">42</span>, <span style="color:#ae81ff">50</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">FindIndex</span>(<span style="color:#a6e22e">intSlice</span>, <span style="color:#ae81ff">33</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">FindIndex</span>(<span style="color:#a6e22e">intSlice</span>, <span style="color:#ae81ff">90</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>-1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>-1
</span></span></code></pre></div><p><a href="https://go.dev/play/p/fv9gzb8K4d7">Go Playground Link</a></p>
<p>In the above example, we have created the function <code>FindIndex</code> that takes in a generic slice, the type parameter <code>[T comparable]</code> indicates that the type used for calling this method needs to have a type that implements the comparable interface (for the elements of the slice). The method takes in two parameters, one the slice as <code>[]T</code> and the other the value to find the index for as type <code>T</code>. The method returns a type <code>int</code> since the index of the slice has to be an integer value.</p>
<p>Inside the function body, we simply iterate over the slice <code>arr</code> and check if the element is equal to the provided value. If the element exists, we return that index, else we return <code>-1</code></p>
<p>As we can see we have run a couple of slices with the function <code>FindIndex</code> with types <code>int</code> and <code>string</code>. The method returns an index value if the element exists, else it returns <code>-1</code>. The <code>comparable</code> is a built-in type constraint. We could even define custom constraints as interfaces that implement the types of the particular type(s).</p>
<p>Also, we could define custom constraints like numeric only, string only, etc.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">numeric</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">uint</span> | <span style="color:#66d9ef">uint8</span> | <span style="color:#66d9ef">uint16</span> | <span style="color:#66d9ef">uint32</span> | <span style="color:#66d9ef">uint64</span> |
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">int</span> | <span style="color:#66d9ef">int8</span> | <span style="color:#66d9ef">int16</span> | <span style="color:#66d9ef">int32</span> | <span style="color:#66d9ef">int64</span> |
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">float32</span> | <span style="color:#66d9ef">float64</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Sum</span>[<span style="color:#a6e22e">T</span> <span style="color:#a6e22e">numeric</span>](<span style="color:#a6e22e">nums</span> []<span style="color:#a6e22e">T</span>) <span style="color:#a6e22e">T</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">T</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">n</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">nums</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">s</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">n</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">s</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">intSlice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">Sum</span>(<span style="color:#a6e22e">intSlice</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">floatSlice</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">float64</span>{<span style="color:#ae81ff">1.1</span>, <span style="color:#ae81ff">2.2</span>, <span style="color:#ae81ff">3.3</span>, <span style="color:#ae81ff">4.4</span>, <span style="color:#ae81ff">5.5</span>}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">Sum</span>(<span style="color:#a6e22e">floatSlice</span>))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">150</span>
</span></span><span style="display:flex;"><span>16.5
</span></span></code></pre></div><p><a href="https://go.dev/play/p/_1eGl58qQ-2">Go Playground Link</a></p>
<p>In the above example, we have created the <code>numeric</code> constraints that allow the type <code>int</code>, <code>float</code> and their variants to be allowed in the numeric generic type. The function <code>Sum</code> is a generic function with the constraint of <code>numeric</code> type parameter. The method takes in the parameter as type <code>[]T</code> and returns the type as <code>T</code>. The method will simply iterate over the slice and return the sum of its elements.</p>
<p>This will allow any numeric type which can be added and the sum can be obtained, so if we try to call the method with other types like <code>string</code> or <code>maps</code>, it won&rsquo;t work, and give an error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run constraints.go
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># command-line-arguments                                                                                                               </span>
</span></span><span style="display:flex;"><span>scripts/generics/constraints.go:46:20: 
</span></span><span style="display:flex;"><span>string does not satisfy numeric <span style="color:#f92672">(</span>string missing in uint | uint8 | uint16 | uint32 | uint64 | int
</span></span><span style="display:flex;"><span> | int8 | int16 | int32 | int64 | float32 | float64<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>shell returned <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>So, we can use the constraint to restrict the type of the generic type parameter which will allow us to restrict the usage and avoid any unsafe type to be used in the generic function.</p>
<p>Also, if we have a custom type with the base types, we need to use <code>~</code> before the type to accept it into the generic constraint. This will allow any approximate type to be allowed in the constraint. Let&rsquo;s say we are implementing a custom string type, for that to work with a constraint, it won&rsquo;t be satisfied in the constraint since its type is <code>CustomString</code> and not <code>string</code>. So to avoid this we use <code>~string</code> that would approximate the type and allow abstracted base types.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">string2</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">strings</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>	~<span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">PrintEach</span>[<span style="color:#a6e22e">T</span> <span style="color:#a6e22e">strings</span>](<span style="color:#a6e22e">arr</span> <span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">arr</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%c\n&#34;</span>, <span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#a6e22e">string2</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">s</span> = <span style="color:#e6db74">&#34;hello&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">PrintEach</span>(<span style="color:#a6e22e">s</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ go run main.go
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>h
</span></span><span style="display:flex;"><span>e
</span></span><span style="display:flex;"><span>l
</span></span><span style="display:flex;"><span>l
</span></span><span style="display:flex;"><span>o
</span></span></code></pre></div><p><a href="https://go.dev/play/p/N-66A9C94ps">Go Playground Link</a></p>
<p>In the above example, we have used the type approximations in the type constraint <code>strings</code>, it allows any string type, whether a base <code>string</code> type or an abstract <code>string</code> type. If you try to remove the <code>~</code> in <code>~string</code>, it will result in the error that <code>string2 does not satisfy strings</code> interface. So, by adding <code>~</code> to the <code>string</code> type the abstract type <code>string2</code> can be satisfied in the generic constraint.</p>
<p>That&rsquo;s it from the 29th part of the series, all the source code for the examples are linked in the GitHub on the <a href="https://github.com/Mr-Destructive/100-days-of-golang/tree/main/scripts/generics">100 days of Golang</a> repository.</p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://bitfieldconsulting.com/golang/generics">Generics in Go</a></li>
<li><a href="https://blog.logrocket.com/understanding-generics-go-1-18/">Understanding generics in Go</a></li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>From this section of the series, we have covered the basics of generics in Golang. By using generics in functions, slices, maps, and structs, and adding constraints to them the fundamental usage of generics was covered.</p>
<p>If you have any questions, feedback, or suggestions, please drop them in the comments/social handles or discuss them below. Thank you so much for reading. Happy Coding :)</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/go"
      >go</a
    >
    
  </footer>
  

  
  
  
  
  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  >
    
    <a class="ltr:pr-3 rtl:pl-3" href="http://localhost:1313/post/golang-go-routines/"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>Golang: Go Routines and WaitGroups</span></a
    >
    
    
    <a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href="http://localhost:1313/post/golang-date-time/"
      ><span>Golang: Date and Time</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    >
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    </main>

    <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    &copy; 2024
    <a class="link" href="http://localhost:1313/">Meet Rajesh Gor</a>
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

  </body>
</html>
