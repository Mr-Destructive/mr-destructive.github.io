<!doctype html>







































<html
  class="not-ready lg:text-base"
  style="--bg: #faf8f1"
  lang="en"
  dir="ltr"
>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Django &#43; Auth0 Quick Setup - Meet Rajesh Gor</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Introduction
This is a guide and a walkthrough of how to quickly set up a base Django project with Auth0 as integration for authentication and authorization. I will walk you through the Django setup and how to use and integrate the functionalities of the Auth0.  I will also discuss how why you should be using Auth0 and why I love it.
The script takes 2:44 minutes time to do everything from scratch. From installing virtualenv in python to integrating the Auth0 application." />
  <meta name="author" content="Meet Rajesh Gor" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="http://localhost:1313/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="http://localhost:1313/theme.png" />

  
  
  
  
  

  
  
  <link rel="preload" as="image" href="http://localhost:1313/twitter.svg" />
  
  <link rel="preload" as="image" href="http://localhost:1313/github.svg" />
  
  <link rel="preload" as="image" href="http://localhost:1313/linkedin.svg" />
  
  

  
  
  <script
    defer
    src="http://localhost:1313/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link
    rel="icon"
    href="http://localhost:1313/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="http://localhost:1313/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.136.5">

  
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="http://localhost:1313/"
      >Meet Rajesh Gor</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse">
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/"
        >Home</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/blog/"
        >Blog</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/about/"
        >About</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/work/"
        >Work</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
    >
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/meetgor21"
        target="_blank"
        rel="me"
      >
        twitter
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/mr-destructive"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./linkedin.svg)"
        href="https://linkedin.com/in/meetgor"
        target="_blank"
        rel="me"
      >
        linkedin
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100vh-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"
    >
      

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">Django &#43; Auth0 Quick Setup</h1>

    
    <div class="text-xs antialiased opacity-60">
      
      <time>Sep 28, 2021</time>
      
      
      
      
    </div>
    
  </header>

  <section><h2 id="introduction">Introduction</h2>
<p>This is a guide and a walkthrough of how to quickly set up a base Django project with Auth0 as integration for authentication and authorization. I will walk you through the Django setup and how to use and integrate the functionalities of the Auth0.  I will also discuss how why you should be using Auth0 and why I love it.</p>
<p>The script takes <code>2:44</code> minutes time to do everything from scratch. From installing virtualenv in python to integrating the Auth0 application.</p>
<p>Here&rsquo;s how the script works:</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632830813802/MOvedPYdt.gif" alt="authodj.gif"></p>
<h3 id="contents">Contents</h3>
<ul>
<li><a href="#what-is-auth0">What is Auth0</a></li>
<li><a href="#why-i-love-auth0">Why I love Auth0</a></li>
<li><a href="#set-up-a-django-project">Set up a Django Project</a></li>
<li><a href="#integrate-auth0-to-a-django-project">Integrate Auth0 to a Django project</a></li>
<li><a href="#creating-a-bash-script-for-integrating-auth0">Creating a BASH Script for integrating Auth0</a>
<ul>
<li><a href="#appending-to-a-file">Appending to a file</a></li>
<li><a href="#adding-text-before-a-particular-line-using-sed">Adding text before a particular line using <code>sed</code> </a></li>
<li><a href="#appending-to-a-line-using-sed">Appending to a line using <code>sed</code></a></li>
</ul>
</li>
<li><a href="#complete-bash-script">Complete BASH Script</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<h2 id="what-is-auth0">What is Auth0</h2>
<p>Auth0 (<code>Auth zero</code>) is a platform that provides easy authentication and authorization for a number of platforms in various programming languages and frameworks. The easy-to-follow documentation, availability for almost all web frameworks across platforms make it a big bonus for developers. They actually make the Developer experience flawless and beginner-friendly.</p>
<p>According to Auth0,</p>
<blockquote>
<p>They make your login box awesome</p>
</blockquote>
<p>And how true is that they make things pretty convenient and wicked fast to integrate a smooth functional backend for authentication and authorization. Of course, there are more things they offer than just making authentication systems but it is by far what the world knows them for.</p>
<h2 id="why-i-love-auth0">Why I love Auth0</h2>
<p>Auth0 is a generous company that provides a free tier for a limited capacity of authentication and that might be more than enough for a developer getting its feet wet in the web development (backend).</p>
<p>They even provide a nice user interface out of the box for login/signup and even a dashboard ready-made, which is quite a lot of heavy lifting already done for you. Also, there is a dashboard for analyzing the number of sign-in/logins into the particular app. This provides the admin/developer of the app to get a closer look at the user registered in a day/week/months, number of active users, and so on.</p>
<p>So, who would not love it? I am willing to write and use their service for some of my projects. I already have used one for the Hashnode x Auth0 Hackathon, I made <a href="https://github.com/Mr-Destructive/devquotes">devquotes</a> using the authentication of Auth0 in my Django application.</p>
<h2 id="set-up-a-django-project">Set up a Django Project</h2>
<p>If you are reading this you already know how to set up a Django project, I assume. But nevertheless, I can just include a quick introduction on how to do it. I have a script to do this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>mkdir $1
</span></span><span style="display:flex;"><span>cd $1
</span></span><span style="display:flex;"><span>pip install virtualenv
</span></span><span style="display:flex;"><span>virtualenv env
</span></span><span style="display:flex;"><span>source env<span style="color:#ae81ff">\b</span>in<span style="color:#ae81ff">\a</span>ctivate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pip install django
</span></span><span style="display:flex;"><span>django-admin startproject $1 .
</span></span><span style="display:flex;"><span>clear
</span></span></code></pre></div><p>You can check out  <a href="https://techstructiveblog.hashnode.dev/django-quick-setup-script">Django Quick Setup Script</a>  for the details of this script and also a more in-depth guide of Django project setup.</p>
<p>But if you want to understand the basics of the Django project setup here is a little guide about it:</p>
<p>Firstly, create a virtual environment, it&rsquo;s not mandatory but it keeps things simple and easy for your project in correspondence to the entire OS. So in python, we have a module to create the virtual environment pretty easily,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pip install virtualenv
</span></span></code></pre></div><p>You can use <code>pip3</code> or <code>pip -m</code>, or however you install normal python modules. This just installs the python virtual environment, we need to create one in the current folder, so for that navigate to the folder where you want to create the project and enter the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>virtualenv venv
</span></span></code></pre></div><p>Here, <code>venv</code> can be anything like <code>env</code> just for your understanding and simplicity it&rsquo;s a standard name kept for the same. After this, you will see a folder of the same name i.e. <code>venv</code> or any other name you have used. This is the folder where python will keep every installation private to the local folder itself. Now, we need to activate the virtual environment, for that we can use the command :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># for Linux/macOS :</span>
</span></span><span style="display:flex;"><span>source venv/bin/activate
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-batch" data-lang="batch"><span style="display:flex;"><span># for Windows:
</span></span><span style="display:flex;"><span>venv\Scripts\activate
</span></span></code></pre></div><p>After this, your command prompt will have a <code>(venv)</code> attached to its start. This indicates you are in a virtual environment, things you do here, may it be module installation or any configuration related to python will stay in the local folder itself.</p>
<p>After the virtual environment is set up and activated, you can install Django and get started with it. Firstly, install Django using pip:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pip install django
</span></span></code></pre></div><p>After the installation is completed, you can start a Django project in the current folder using the command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>django-admin startproject name
</span></span></code></pre></div><p>Here name can be your project name. After this, you will see one new folder and one file pop up.
Namely, the <code>project named</code> folder and <code>manage.py</code> file. So you don&rsquo;t have to touch the <code>manage.py</code> file but we use it in most of the commands to use the Django functionalities.</p>
<p>You can now run your basic server using the command :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>python manage.py runserver
</span></span></code></pre></div><p>There is a base installed/setup of the Django project. Moving on in integrating the Auth0 login functionality in our webpage.</p>
<h2 id="integrate-the-auth0-app-in-your-project">Integrate the Auth0 app in your project</h2>
<p>So, for integrating the Auth0 app for your web application, you need to have an Auth0 account, you can signup here. After this you can create an Auth0 application for any type of application, we have a couple of options:</p>
<ul>
<li>Native Application</li>
<li>Single Page Application</li>
<li>Regular Web Application</li>
<li>Machine to Machine Application</li>
</ul>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632748408741/sUeS8AgrX.png" alt="image.png"></p>
<p>You can choose as per your needs, but mostly it would be a Regular Web application if you have a backend like Django, Nodejs, PHP, or other types of frameworks and languages. So, moving ahead we have created an application for the Django framework as a backend. Now, we have a <code>Settings</code> tab in the application dashboard, where we have different credentials for the Auth0 app to talk to our application.</p>
<p>The credentials needed to be stored safely are:</p>
<ul>
<li>domain</li>
<li>Client ID (Key)</li>
<li>Client Secret</li>
</ul>
<p>This has to be secured for our local application which will go into production when ready. You can use several options like dotenv, environment variables, and so on when the application is being deployed but for now, let&rsquo;s hardcode them in our Django project.</p>
<p>Now, you can follow the simple straightforward procedure to copy-paste your credentials from the  <a href="https://auth0.com/docs/quickstart/webapp/django/01-login#logout">Auth0 official documentation</a>. It&rsquo;s quite straightforward to follow the steps even for a beginner.</p>
<p>After the Auth0 app has been configured following the procedure in the documentation, you need to integrate several files like dashboard and index templates into your custom templates.</p>
<p>Following additional changes are also to be made if you have a user-defined app for your Django project.</p>
<p>In the <code>auth0login</code> app, <code>view.py</code> file:</p>
<ol>
<li>The <code>index</code> function renders the base file for your project if the user is logged in.</li>
<li>The <code>dashboard</code> function renders the baked version of your profile/dashboard of users on your app.</li>
</ol>
<p>You would also need to add the root URIs of your app that you will be using for testing or in production. For example, we can add <code>http://127.0.0.1:8000</code> to allow and use Auth0 in our development environment locally.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632828981455/2gc4h7tTh.png" alt="image.png"></p>
<p>You also need to specify the callback URLs for your application which is <code>/complete/auth0</code> by default.</p>
<h2 id="creating-a-bash-script-for-integrating-auth0">Creating a BASH Script for integrating Auth0</h2>
<p>So, we can now dive into creating the BASH Script to set up the Django x Auth0 application in minutes. The script is quite large, like 200 lines but don&rsquo;t worry! Its automation reduces the pain of integrating a User Authorization flawlessly. I am also thinking of adding the <code>cURL</code> command and parsing in the Client ids, keys, and secret keys, etc.</p>
<h3 id="appending-to-a-file">Appending to a file</h3>
<p>We can use the <code>cat</code> command to append text to a file, using the syntax as below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; filename
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">text
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">more text
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><p>Remember here EOF is just a label to stop the command and save it to the file.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632826339707/_g_RXP3NE.png" alt="image.png"></p>
<p>So, we can see that we were able to append to a file, multiple lines using the cat command.</p>
<p>We have used this concept in adding configuration and credentials to the <code>settings.py</code> or the <code>urls.py</code> files.</p>
<h3 id="adding-text-before-a-particular-line-using-sed">Adding text before a particular line using <code>sed</code></h3>
<p><code>sed</code> is a great command, and there is nothing you can&rsquo;t do with it, OK there might be exceptions. We can get write to a file directly (don&rsquo;t display the output) and specify the line number before which we want to append the text. We can then add the text we want and followed by the filename.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;33 i sometext here&#39;</span> filename
</span></span></code></pre></div><p>Here, <code>33</code> is the line number in the file which we want to insert before. We have used <code>'&quot;'</code> to add a <code>'</code> inside a <code>'</code>, this might feel a bit wired but that is how it is in BASH.</p>
<p>Let&rsquo;s say you want to add <code>print('Hello, World!')</code> to a particular line, we have to enclose <code>'</code> with these <code>&quot;'</code>( double and single quotes),</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;2i print(&#39;</span><span style="color:#e6db74">&#34;&#39;Hello, World&#39;&#34;</span><span style="color:#e6db74">&#39;)&#39;</span> hello.py
</span></span></code></pre></div><p>This will add the line <code>print('Hello World')</code> to the file <code>hello.py</code></p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632824742835/Uj8AF07UG.png" alt="image.png"></p>
<h3 id="appending-to-a-line-using-sed">Appending to a line using sed</h3>
<p>We can even append text to a particular line using sed, we can use some escape characters and regex to add the text from the end of the line.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;2i s/$/ textgoes here /&#39;</span> filename
</span></span></code></pre></div><p>Here 2 is any number of line you want to add text to, next <code>i</code> a prompt for inserting text and then we have regex like <code>s/$/ /</code>, this will put the text enclosed in <code>/ /</code> to the end of the line as indicated by <code>$</code>.  We have the filename at its usual place as before.</p>
<p>So, lets say, I want to add a comment to the second line in the previous example, I can use the following command to do it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;2 s/$/ # another comment/&#39;</span> hello.py
</span></span></code></pre></div><p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632825067925/0eU2mkCDI.png" alt="image.png"></p>
<p>We have used these commands to add the <code>include</code> function in the <code>urls.py</code> in the project folder.</p>
<p>So those were all the operations we used for doing some automated editing for the Auth0 app integration to our Django project.</p>
<p>Below is the entire script and is also uploaded on <a href="https://github.com/Mr-Destructive/django-auth0-quick-setup">GitHub</a>.</p>
<h2 id="complete-bash-script">Complete BASH Script</h2>
<p>You can run the file by parsing the name of your project.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>bash script.sh mywebsite
</span></span></code></pre></div><p>Wait for some 2-3 minutes, and the script will produce the Django application with the Auth0 app integrated. You will have to enter the credentials manually wherever applicable.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>mkdir $1
</span></span><span style="display:flex;"><span>cd $1
</span></span><span style="display:flex;"><span>pip install virtualenv
</span></span><span style="display:flex;"><span>virtualenv venv
</span></span><span style="display:flex;"><span>source venv/Scripts/activate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pip install django
</span></span><span style="display:flex;"><span>django-admin startproject $1 .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; requirements.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">social-auth-app-django~=3.1 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">python-jose~=3.0 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">python-dotenv~=0.9
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pip install -r requirements.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pip freeze &gt; requirements.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>python manage.py startapp auth0login
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>touch auth0login/urls.py
</span></span><span style="display:flex;"><span>mkdir auth0login/templates
</span></span><span style="display:flex;"><span>touch auth0login/templates/index.html
</span></span><span style="display:flex;"><span>touch auth0login/templates/dashboard.html
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;40 i \    &#39;</span><span style="color:#e6db74">&#34;&#39;&#34;</span><span style="color:#e6db74">&#39;social_django&#39;</span><span style="color:#e6db74">&#34;&#39;&#34;</span><span style="color:#e6db74">&#39;,&#39;</span> $1/settings.py
</span></span><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;41 i \    &#39;</span><span style="color:#e6db74">&#34;&#39;&#34;</span><span style="color:#e6db74">&#39;auth0login&#39;</span><span style="color:#e6db74">&#34;&#39;&#34;</span><span style="color:#e6db74">&#39;,&#39;</span> $1/settings.py
</span></span><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;21 i \    path(&#39;</span><span style="color:#e6db74">&#34;&#39;&#39;&#34;</span><span style="color:#e6db74">&#39;, include(&#39;</span><span style="color:#e6db74">&#34;&#39;auth0login.urls&#39;&#34;</span><span style="color:#e6db74">&#39;)),&#39;</span> $1/urls.py
</span></span><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;17 s/$/, include/&#39;</span> $1/urls.py 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; $1/settings.py
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SOCIAL_AUTH_TRAILING_SLASH = False  # Remove trailing slash from routes
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SOCIAL_AUTH_AUTH0_DOMAIN = &#39;YOUR_DOMAIN&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SOCIAL_AUTH_AUTH0_KEY = &#39;YOUR_CLIENT_ID&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SOCIAL_AUTH_AUTH0_SECRET = &#39;YOUR_CLIENT_SECRET&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; $1/settings.py 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SOCIAL_AUTH_AUTH0_SCOPE = [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;openid&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;profile&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;email&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>python manage.py migrate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt;auth0login/auth0backend.py
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from urllib import request
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from jose import jwt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from social_core.backends.oauth import BaseOAuth2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">class Auth0(BaseOAuth2):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;Auth0 OAuth authentication backend&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    name = &#39;auth0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SCOPE_SEPARATOR = &#39; &#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ACCESS_TOKEN_METHOD = &#39;POST&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    REDIRECT_STATE = False
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    EXTRA_DATA = [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        (&#39;picture&#39;, &#39;picture&#39;),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        (&#39;email&#39;, &#39;email&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def authorization_url(self):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return &#39;https://&#39; + self.setting(&#39;DOMAIN&#39;) + &#39;/authorize&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def access_token_url(self):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return &#39;https://&#39; + self.setting(&#39;DOMAIN&#39;) + &#39;/oauth/token&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def get_user_id(self, details, response):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;Return current user id.&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return details[&#39;user_id&#39;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    def get_user_details(self, response):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        # Obtain JWT and the keys to validate the signature
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        id_token = response.get(&#39;id_token&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        jwks = request.urlopen(&#39;https://&#39; + self.setting(&#39;DOMAIN&#39;) + &#39;/.well-known/jwks.json&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        issuer = &#39;https://&#39; + self.setting(&#39;DOMAIN&#39;) + &#39;/&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        audience = self.setting(&#39;KEY&#39;)  # CLIENT_ID
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        payload = jwt.decode(id_token, jwks.read(), algorithms=[&#39;RS256&#39;], audience=audience, issuer=issuer)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return {&#39;username&#39;: payload[&#39;nickname&#39;],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#39;first_name&#39;: payload[&#39;name&#39;],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#39;picture&#39;: payload[&#39;picture&#39;],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#39;user_id&#39;: payload[&#39;sub&#39;],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#39;email&#39;: payload[&#39;email&#39;]}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; $1/settings.py
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">AUTHENTICATION_BACKENDS = {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    #&#39;YOUR_DJANGO_APP_NAME.auth0backend.Auth0&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#39;django.contrib.auth.backends.ModelBackend&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; $1/settings.py
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LOGIN_URL = &#39;/login/auth0&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LOGIN_REDIRECT_URL = &#39;/dashboard&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat &gt; auth0login/views.py<span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from django.shortcuts import render, redirect
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from django.contrib.auth.decorators import login_required
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from django.contrib.auth import logout as log_out
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from django.conf import settings
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from django.http import HttpResponseRedirect
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from urllib.parse import urlencode
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">import json
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">def index(request):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    user = request.user
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    if user.is_authenticated:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return redirect(dashboard)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    else:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return render(request, &#39;index.html&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">@login_required
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">def dashboard(request):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    user = request.user
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    auth0user = user.social_auth.get(provider=&#39;auth0&#39;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    userdata = {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#39;user_id&#39;: auth0user.uid,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#39;name&#39;: user.first_name,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#39;picture&#39;: auth0user.extra_data[&#39;picture&#39;],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#39;email&#39;: auth0user.extra_data[&#39;email&#39;],
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    return render(request, &#39;dashboard.html&#39;, {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#39;auth0User&#39;: auth0user,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#39;userdata&#39;: json.dumps(userdata, indent=4)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    })
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">def logout(request):
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    log_out(request)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    return_to = urlencode({&#39;returnTo&#39;: request.build_absolute_uri(&#39;/&#39;)})
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    logout_url = &#39;https://%s/v2/logout?client_id=%s&amp;%s&#39; % \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                 (settings.SOCIAL_AUTH_AUTH0_DOMAIN, settings.SOCIAL_AUTH_AUTH0_KEY, return_to)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    return HttpResponseRedirect(logout_url)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; auth0login/templates/index.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;div class=&#34;login-box auth0-box before&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;img src=&#34;https://i.cloudup.com/StzWWrY34s.png&#34; /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;h3&gt;Auth0 Example&lt;/h3&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;p&gt;Zero friction identity infrastructure, built for developers&lt;/p&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;a class=&#34;btn btn-primary btn-lg btn-login btn-block&#34; href=&#34;/login/auth0&#34;&gt;Log In&lt;/a&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; auth0login/templates/dashboard.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;div class=&#34;logged-in-box auth0-box logged-in&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;h1 id=&#34;logo&#34;&gt;&lt;img src=&#34;//cdn.auth0.com/samples/auth0_logo_final_blue_RGB.png&#34; /&gt;&lt;/h1&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;img class=&#34;avatar&#34; src=&#34;{{ auth0User.extra_data.picture }}&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;h2&gt;Welcome {{ user.username }}&lt;/h2&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &lt;pre&gt;{{ userdata }}&lt;/pre&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt;&gt; auth0login/urls.py
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from django.urls import path, include
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">from . import views
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">urlpatterns = [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path(&#39;&#39;, views.index),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path(&#39;dashboard&#39;, views.dashboard),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path(&#39;logout&#39;, views.logout),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path(&#39;&#39;, include(&#39;django.contrib.auth.urls&#39;)),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    path(&#39;&#39;, include(&#39;social_django.urls&#39;)),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>python manage.py makemigrations
</span></span><span style="display:flex;"><span>python manage.py migrate
</span></span></code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>Ok, so this was it, a quite big script but that&rsquo;s how automation can be. We were able to set up a Django base application with a ready app of Auth0 to extend the functionality. This was just a basic script also you can extend the functionalities like adding a curl command to fetch the credentials and make it more automated but that was not the aim of this article.</p>
<p>If you had any issues using the script please let me know, I&rsquo;ll be happy to fix those. Thanks for reading. Happy Coding :)</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/django"
      >django</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/bash"
      >bash</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/python"
      >python</a
    >
    
  </footer>
  

  
  
  
  
  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  >
    
    <a class="ltr:pr-3 rtl:pl-3" href="http://localhost:1313/blog/ml-intro/"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>What is Machine Learning?</span></a
    >
    
    
    <a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href="http://localhost:1313/blog/oop-cpp-p3/"
      ><span>Object-Oriented Programming in C&#43;&#43;: Constructors</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    >
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    </main>

    <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    &copy; 2024
    <a class="link" href="http://localhost:1313/">Meet Rajesh Gor</a>
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

  </body>
</html>
